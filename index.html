<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OptivusIA - Gerador de Código com IA Avançada</title>
    <meta name="description" content="Plataforma futurística para geração de código com IA. Pesquise, gere e otimize código em múltiplas linguagens com tecnologia de ponta.">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=Inter:wght@300;400;500;600;700&display=swap');
        
        * {
            font-family: 'Inter', sans-serif;
        }
        
        .futuristic-font {
            font-family: 'Orbitron', monospace;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 25%, #16213e 50%, #0f3460 75%, #533483 100%);
        }
        
        .neon-glow {
            box-shadow: 0 0 20px rgba(79, 172, 254, 0.3), 0 0 40px rgba(79, 172, 254, 0.1);
        }
        
        .cyber-border {
            border: 1px solid;
            border-image: linear-gradient(45deg, #4facfe, #00f2fe, #4facfe) 1;
        }
        
        .hologram-effect {
            background: linear-gradient(45deg, rgba(79, 172, 254, 0.1), rgba(0, 242, 254, 0.1));
            backdrop-filter: blur(10px);
            border: 1px solid rgba(79, 172, 254, 0.3);
        }
        
        .code-container {
            background: #2d3748;
            border-radius: 8px;
        }
        
        .sidebar-transition {
            transition: transform 0.3s ease-in-out;
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .typing-animation::after {
            content: '|';
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
    </style>
</head>
<body class="bg-gray-900 text-white transition-colors duration-300" style="background: radial-gradient(ellipse at center, #1a1a2e 0%, #0f0f23 100%);">
    <!-- Animated background particles -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none">
        <div class="absolute w-2 h-2 bg-blue-400 rounded-full animate-pulse" style="top: 10%; left: 10%; animation-delay: 0s;"></div>
        <div class="absolute w-1 h-1 bg-cyan-400 rounded-full animate-pulse" style="top: 20%; left: 80%; animation-delay: 1s;"></div>
        <div class="absolute w-3 h-3 bg-purple-400 rounded-full animate-pulse" style="top: 60%; left: 20%; animation-delay: 2s;"></div>
        <div class="absolute w-1 h-1 bg-blue-300 rounded-full animate-pulse" style="top: 80%; left: 70%; animation-delay: 3s;"></div>
        <div class="absolute w-2 h-2 bg-cyan-300 rounded-full animate-pulse" style="top: 30%; left: 60%; animation-delay: 4s;"></div>
    </div>
    <!-- Header -->
    <header class="relative z-50 hologram-effect border-b border-cyan-500/30">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-4">
                    <button id="sidebarToggle" class="lg:hidden p-2 rounded-md text-cyan-300 hover:bg-cyan-500/20 neon-glow">
                        <i class="fas fa-bars"></i>
                    </button>
                    <div class="flex items-center space-x-3">
                        <div class="w-10 h-10 gradient-bg rounded-lg flex items-center justify-center neon-glow">
                            <i class="fas fa-brain text-white text-lg"></i>
                        </div>
                        <h1 class="text-2xl font-bold futuristic-font bg-gradient-to-r from-cyan-400 to-blue-400 bg-clip-text text-transparent">
                            OPTIVUS<span class="text-purple-400">IA</span>
                        </h1>
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <!-- AI Research Button -->
                    <button id="researchBtn" class="p-2 rounded-md text-cyan-300 hover:bg-cyan-500/20 neon-glow relative">
                        <i class="fas fa-search"></i>
                        <span class="absolute -top-1 -right-1 w-3 h-3 bg-green-400 rounded-full animate-pulse"></span>
                    </button>
                    <button class="bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600 text-white px-6 py-2 rounded-lg text-sm font-medium neon-glow futuristic-font">
                        <i class="fas fa-user-astronaut mr-2"></i>CONECTAR
                    </button>
                </div>
            </div>
        </div>
    </header>

    <div class="flex h-screen pt-16">
        <!-- Sidebar -->
        <aside id="sidebar" class="w-64 hologram-effect border-r border-cyan-500/30 sidebar-transition transform -translate-x-full lg:translate-x-0 fixed lg:relative z-30 h-full">
            <div class="p-4 space-y-6">
                <!-- Language Selection -->
                <div>
                    <h3 class="text-sm font-semibold text-cyan-300 mb-3 futuristic-font">LINGUAGENS</h3>
                    <div class="space-y-2">
                        <button class="language-btn w-full text-left px-3 py-2 rounded-lg text-sm text-gray-300 hover:bg-cyan-500/20 hover:text-cyan-300 flex items-center space-x-2 border border-transparent hover:border-cyan-500/30" data-lang="python">
                            <i class="fab fa-python text-blue-400"></i>
                            <span>Python</span>
                        </button>
                        <button class="language-btn w-full text-left px-3 py-2 rounded-lg text-sm text-gray-300 hover:bg-cyan-500/20 hover:text-cyan-300 flex items-center space-x-2 border border-transparent hover:border-cyan-500/30" data-lang="javascript">
                            <i class="fab fa-js-square text-yellow-400"></i>
                            <span>JavaScript</span>
                        </button>
                        <button class="language-btn w-full text-left px-3 py-2 rounded-lg text-sm text-gray-300 hover:bg-cyan-500/20 hover:text-cyan-300 flex items-center space-x-2 border border-transparent hover:border-cyan-500/30" data-lang="html">
                            <i class="fab fa-html5 text-orange-400"></i>
                            <span>HTML</span>
                        </button>
                        <button class="language-btn w-full text-left px-3 py-2 rounded-lg text-sm text-gray-300 hover:bg-cyan-500/20 hover:text-cyan-300 flex items-center space-x-2 border border-transparent hover:border-cyan-500/30" data-lang="css">
                            <i class="fab fa-css3-alt text-blue-400"></i>
                            <span>CSS</span>
                        </button>
                        <button class="language-btn w-full text-left px-3 py-2 rounded-lg text-sm text-gray-300 hover:bg-cyan-500/20 hover:text-cyan-300 flex items-center space-x-2 border border-transparent hover:border-cyan-500/30" data-lang="java">
                            <i class="fab fa-java text-red-400"></i>
                            <span>Java</span>
                        </button>
                        <button class="language-btn w-full text-left px-3 py-2 rounded-lg text-sm text-gray-300 hover:bg-cyan-500/20 hover:text-cyan-300 flex items-center space-x-2 border border-transparent hover:border-cyan-500/30" data-lang="cpp">
                            <i class="fas fa-code text-purple-400"></i>
                            <span>C++</span>
                        </button>
                    </div>
                </div>

                <!-- Quick Templates -->
                <div>
                    <h3 class="text-sm font-semibold text-cyan-300 mb-3 futuristic-font">TEMPLATES IA</h3>
                    <div class="space-y-2">
                        <button class="template-btn w-full text-left px-3 py-2 rounded-lg text-sm text-gray-400 hover:bg-cyan-500/20 hover:text-cyan-300 border border-transparent hover:border-cyan-500/30" data-template="api">
                            <i class="fas fa-server mr-2 text-cyan-400"></i>API REST
                        </button>
                        <button class="template-btn w-full text-left px-3 py-2 rounded-lg text-sm text-gray-400 hover:bg-cyan-500/20 hover:text-cyan-300 border border-transparent hover:border-cyan-500/30" data-template="crud">
                            <i class="fas fa-database mr-2 text-green-400"></i>CRUD
                        </button>
                        <button class="template-btn w-full text-left px-3 py-2 rounded-lg text-sm text-gray-400 hover:bg-cyan-500/20 hover:text-cyan-300 border border-transparent hover:border-cyan-500/30" data-template="auth">
                            <i class="fas fa-lock mr-2 text-purple-400"></i>Autenticação
                        </button>
                        <button class="template-btn w-full text-left px-3 py-2 rounded-lg text-sm text-gray-400 hover:bg-cyan-500/20 hover:text-cyan-300 border border-transparent hover:border-cyan-500/30" data-template="form">
                            <i class="fas fa-wpforms mr-2 text-orange-400"></i>Formulário
                        </button>
                    </div>
                </div>

                <!-- History -->
                <div>
                    <h3 class="text-sm font-semibold text-cyan-300 mb-3 futuristic-font">HISTÓRICO</h3>
                    <div id="historyList" class="space-y-2 max-h-40 overflow-y-auto">
                        <!-- History items will be added here -->
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 flex flex-col overflow-hidden">
            <!-- Input Section -->
            <div class="hologram-effect border-b border-cyan-500/30 p-6">
                <div class="max-w-4xl mx-auto">
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-cyan-300 mb-2 futuristic-font">
                            DESCREVA O CÓDIGO QUE VOCÊ PRECISA
                        </label>
                        <div class="relative">
                            <textarea 
                                id="promptInput" 
                                placeholder="Ex: Crie uma função em Python que calcule o fatorial de um número..."
                                class="w-full p-4 border border-cyan-500/30 rounded-lg focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 bg-gray-800/50 text-white resize-none neon-glow"
                                rows="3"
                            ></textarea>
                            <div class="absolute bottom-3 right-3 flex items-center space-x-2">
                                <select id="languageSelect" class="text-sm bg-gray-700 border border-cyan-500/30 rounded px-2 py-1 text-cyan-300 futuristic-font">
                                    <option value="python">Python</option>
                                    <option value="javascript">JavaScript</option>
                                    <option value="html">HTML</option>
                                    <option value="css">CSS</option>
                                    <option value="java">Java</option>
                                    <option value="cpp">C++</option>
                                    <option value="php">PHP</option>
                                    <option value="sql">SQL</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex flex-wrap gap-3">
                        <button id="generateBtn" class="bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600 text-white px-6 py-2 rounded-lg font-medium flex items-center space-x-2 neon-glow futuristic-font">
                            <i class="fas fa-magic"></i>
                            <span>GERAR CÓDIGO</span>
                        </button>
                        <button id="optimizeBtn" class="bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white px-6 py-2 rounded-lg font-medium flex items-center space-x-2 neon-glow futuristic-font" disabled>
                            <i class="fas fa-cogs"></i>
                            <span>OTIMIZAR</span>
                        </button>
                        <button id="explainBtn" class="bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-6 py-2 rounded-lg font-medium flex items-center space-x-2 neon-glow futuristic-font" disabled>
                            <i class="fas fa-question-circle"></i>
                            <span>EXPLICAR</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Output Section -->
            <div class="flex-1 p-6 overflow-auto">
                <div class="max-w-4xl mx-auto">
                    <div id="loadingState" class="hidden text-center py-12">
                        <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
                        <p class="mt-4 text-gray-600 dark:text-gray-400">Gerando código com IA...</p>
                    </div>

                    <div id="outputSection" class="hidden fade-in">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-gray-900 dark:text-white">Código Gerado</h3>
                            <div class="flex space-x-2">
                                <button id="copyBtn" class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg text-sm flex items-center space-x-2">
                                    <i class="fas fa-copy"></i>
                                    <span>Copiar</span>
                                </button>
                                <button id="downloadBtn" class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg text-sm flex items-center space-x-2">
                                    <i class="fas fa-download"></i>
                                    <span>Baixar</span>
                                </button>
                                <button id="saveBtn" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm flex items-center space-x-2">
                                    <i class="fas fa-save"></i>
                                    <span>Salvar</span>
                                </button>
                            </div>
                        </div>
                        
                        <div class="code-container">
                            <div class="flex items-center justify-between px-4 py-2 bg-gray-700 rounded-t-lg">
                                <div class="flex items-center space-x-2">
                                    <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                                    <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                                    <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                                </div>
                                <span id="codeLanguage" class="text-gray-300 text-sm">Python</span>
                            </div>
                            <pre class="p-4 overflow-x-auto"><code id="generatedCode" class="language-python">
# Seu código será gerado aqui...
                            </code></pre>
                        </div>

                        <div id="explanationSection" class="mt-6 hidden">
                            <h4 class="text-md font-semibold text-gray-900 dark:text-white mb-3">Explicação do Código</h4>
                            <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4">
                                <p id="codeExplanation" class="text-gray-700 dark:text-gray-300"></p>
                            </div>
                        </div>

                        <!-- Feedback Section -->
                        <div class="mt-6 bg-gray-50 dark:bg-gray-800 rounded-lg p-4">
                            <h4 class="text-md font-semibold text-gray-900 dark:text-white mb-3">Avalie este código</h4>
                            <div class="flex items-center space-x-4">
                                <button class="feedback-btn flex items-center space-x-2 px-3 py-2 rounded-lg text-sm bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-900/50" data-rating="good">
                                    <i class="fas fa-thumbs-up"></i>
                                    <span>Útil</span>
                                </button>
                                <button class="feedback-btn flex items-center space-x-2 px-3 py-2 rounded-lg text-sm bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 hover:bg-red-200 dark:hover:bg-red-900/50" data-rating="bad">
                                    <i class="fas fa-thumbs-down"></i>
                                    <span>Não útil</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Welcome State -->
                    <div id="welcomeState" class="text-center py-12">
                        <div class="w-32 h-32 gradient-bg rounded-full flex items-center justify-center mx-auto mb-6 neon-glow">
                            <i class="fas fa-brain text-white text-4xl animate-pulse"></i>
                        </div>
                        <h2 class="text-3xl font-bold text-white mb-4 futuristic-font">
                            BEM-VINDO AO <span class="bg-gradient-to-r from-cyan-400 to-blue-400 bg-clip-text text-transparent">OPTIVUS</span><span class="text-purple-400">IA</span>
                        </h2>
                        <p class="text-gray-300 mb-8 max-w-md mx-auto">
                            Descreva o código que você precisa e nossa IA avançada irá gerar para você em segundos!
                        </p>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 max-w-2xl mx-auto">
                            <div class="hologram-effect p-6 rounded-lg border border-cyan-500/30 hover:border-cyan-400/50 transition-all">
                                <i class="fas fa-lightning-bolt text-cyan-400 text-2xl mb-3"></i>
                                <h3 class="font-semibold text-white futuristic-font">ULTRA RÁPIDO</h3>
                                <p class="text-sm text-gray-300">Código gerado em segundos</p>
                            </div>
                            <div class="hologram-effect p-6 rounded-lg border border-cyan-500/30 hover:border-cyan-400/50 transition-all">
                                <i class="fas fa-code text-green-400 text-2xl mb-3"></i>
                                <h3 class="font-semibold text-white futuristic-font">MULTI-LINGUAGEM</h3>
                                <p class="text-sm text-gray-300">Suporte a 8+ linguagens</p>
                            </div>
                            <div class="hologram-effect p-6 rounded-lg border border-cyan-500/30 hover:border-cyan-400/50 transition-all">
                                <i class="fas fa-brain text-purple-400 text-2xl mb-3"></i>
                                <h3 class="font-semibold text-white futuristic-font">IA AVANÇADA</h3>
                                <p class="text-sm text-gray-300">Powered by GPT-4</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- AI Research Modal -->
    <div id="researchModal" class="fixed inset-0 bg-black/70 backdrop-blur-sm z-50 hidden flex items-center justify-center p-4">
        <div class="hologram-effect rounded-xl max-w-4xl w-full max-h-[90vh] overflow-hidden">
            <div class="p-6 border-b border-cyan-500/30">
                <div class="flex justify-between items-center">
                    <h2 class="text-xl font-bold futuristic-font text-cyan-400">CENTRAL DE PESQUISA IA</h2>
                    <button id="closeResearch" class="text-gray-400 hover:text-white">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
            </div>
            <div class="p-6 overflow-y-auto max-h-[70vh]">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- AI Sources -->
                    <div>
                        <h3 class="text-lg font-semibold text-cyan-300 mb-4 futuristic-font">FONTES DE IA</h3>
                        <div class="space-y-3">
                            <div class="bg-gray-800/50 p-4 rounded-lg border border-cyan-500/20">
                                <div class="flex items-center space-x-3 mb-2">
                                    <div class="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center">
                                        <i class="fas fa-robot text-white text-sm"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-semibold text-white">OpenAI GPT-4</h4>
                                        <p class="text-xs text-green-400">ATIVO</p>
                                    </div>
                                </div>
                                <p class="text-sm text-gray-300">Modelo de linguagem avançado para geração de código</p>
                            </div>
                            
                            <div class="bg-gray-800/50 p-4 rounded-lg border border-cyan-500/20">
                                <div class="flex items-center space-x-3 mb-2">
                                    <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center">
                                        <i class="fas fa-code text-white text-sm"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-semibold text-white">GitHub Copilot</h4>
                                        <p class="text-xs text-blue-400">INTEGRADO</p>
                                    </div>
                                </div>
                                <p class="text-sm text-gray-300">Assistente de código baseado em IA</p>
                            </div>
                            
                            <div class="bg-gray-800/50 p-4 rounded-lg border border-cyan-500/20">
                                <div class="flex items-center space-x-3 mb-2">
                                    <div class="w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center">
                                        <i class="fas fa-brain text-white text-sm"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-semibold text-white">Claude AI</h4>
                                        <p class="text-xs text-purple-400">DISPONÍVEL</p>
                                    </div>
                                </div>
                                <p class="text-sm text-gray-300">IA conversacional para análise de código</p>
                            </div>
                            
                            <div class="bg-gray-800/50 p-4 rounded-lg border border-cyan-500/20">
                                <div class="flex items-center space-x-3 mb-2">
                                    <div class="w-8 h-8 bg-orange-500 rounded-full flex items-center justify-center">
                                        <i class="fas fa-search text-white text-sm"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-semibold text-white">Stack Overflow AI</h4>
                                        <p class="text-xs text-orange-400">BETA</p>
                                    </div>
                                </div>
                                <p class="text-sm text-gray-300">Busca inteligente em base de conhecimento</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Research Tools -->
                    <div>
                        <h3 class="text-lg font-semibold text-cyan-300 mb-4 futuristic-font">FERRAMENTAS DE PESQUISA</h3>
                        <div class="space-y-4">
                            <div class="bg-gray-800/50 p-4 rounded-lg border border-cyan-500/20">
                                <h4 class="font-semibold text-white mb-2">Busca Semântica</h4>
                                <input type="text" placeholder="Pesquisar padrões de código..." class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white text-sm">
                                <button class="mt-2 bg-cyan-500 hover:bg-cyan-600 text-white px-4 py-1 rounded text-sm">
                                    <i class="fas fa-search mr-1"></i>Pesquisar
                                </button>
                            </div>
                            
                            <div class="bg-gray-800/50 p-4 rounded-lg border border-cyan-500/20">
                                <h4 class="font-semibold text-white mb-2">Análise de Tendências</h4>
                                <div class="space-y-2">
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-300">React Hooks</span>
                                        <span class="text-green-400">↗ 23%</span>
                                    </div>
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-300">TypeScript</span>
                                        <span class="text-green-400">↗ 18%</span>
                                    </div>
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-300">Python FastAPI</span>
                                        <span class="text-green-400">↗ 31%</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-gray-800/50 p-4 rounded-lg border border-cyan-500/20">
                                <h4 class="font-semibold text-white mb-2">Documentação IA</h4>
                                <div class="space-y-2 text-sm">
                                    <a href="#" class="block text-cyan-400 hover:text-cyan-300">
                                        <i class="fas fa-book mr-2"></i>Guia de Prompts Eficazes
                                    </a>
                                    <a href="#" class="block text-cyan-400 hover:text-cyan-300">
                                        <i class="fas fa-lightbulb mr-2"></i>Melhores Práticas
                                    </a>
                                    <a href="#" class="block text-cyan-400 hover:text-cyan-300">
                                        <i class="fas fa-code mr-2"></i>Exemplos de Código
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Overlay for mobile sidebar -->
    <div id="sidebarOverlay" class="fixed inset-0 bg-black bg-opacity-50 z-20 hidden lg:hidden"></div>

    <script>
        // Research modal functionality
        const researchBtn = document.getElementById('researchBtn');
        const researchModal = document.getElementById('researchModal');
        const closeResearch = document.getElementById('closeResearch');

        researchBtn.addEventListener('click', () => {
            researchModal.classList.remove('hidden');
        });

        closeResearch.addEventListener('click', () => {
            researchModal.classList.add('hidden');
        });

        researchModal.addEventListener('click', (e) => {
            if (e.target === researchModal) {
                researchModal.classList.add('hidden');
            }
        });

        // Sidebar toggle functionality
        const sidebarToggle = document.getElementById('sidebarToggle');
        const sidebar = document.getElementById('sidebar');
        const sidebarOverlay = document.getElementById('sidebarOverlay');

        function toggleSidebar() {
            sidebar.classList.toggle('-translate-x-full');
            sidebarOverlay.classList.toggle('hidden');
        }

        sidebarToggle.addEventListener('click', toggleSidebar);
        sidebarOverlay.addEventListener('click', toggleSidebar);

        // Language selection
        const languageBtns = document.querySelectorAll('.language-btn');
        const languageSelect = document.getElementById('languageSelect');

        languageBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const lang = btn.dataset.lang;
                languageSelect.value = lang;
                
                // Update active state
                languageBtns.forEach(b => b.classList.remove('bg-cyan-500/30', 'text-cyan-300', 'border-cyan-400'));
                btn.classList.add('bg-cyan-500/30', 'text-cyan-300', 'border-cyan-400');
            });
        });

        // Template buttons
        const templateBtns = document.querySelectorAll('.template-btn');
        const promptInput = document.getElementById('promptInput');

        const templates = {
            api: 'Crie uma API REST em {language} com endpoints para CRUD de usuários, incluindo autenticação JWT',
            crud: 'Crie um sistema CRUD completo em {language} para gerenciar produtos com validação de dados',
            auth: 'Implemente um sistema de autenticação em {language} com login, registro e middleware de proteção',
            form: 'Crie um formulário de contato em {language} com validação de campos e envio de email'
        };

        templateBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const template = btn.dataset.template;
                const language = languageSelect.value;
                const languageNames = {
                    python: 'Python',
                    javascript: 'JavaScript/Node.js',
                    html: 'HTML',
                    css: 'CSS',
                    java: 'Java',
                    cpp: 'C++',
                    php: 'PHP',
                    sql: 'SQL'
                };
                
                promptInput.value = templates[template].replace('{language}', languageNames[language]);
                promptInput.focus();
            });
        });

        // Code generation functionality
        const generateBtn = document.getElementById('generateBtn');
        const optimizeBtn = document.getElementById('optimizeBtn');
        const explainBtn = document.getElementById('explainBtn');
        const loadingState = document.getElementById('loadingState');
        const outputSection = document.getElementById('outputSection');
        const welcomeState = document.getElementById('welcomeState');
        const generatedCode = document.getElementById('generatedCode');
        const codeLanguage = document.getElementById('codeLanguage');
        const explanationSection = document.getElementById('explanationSection');
        const codeExplanation = document.getElementById('codeExplanation');

        // Sample code templates for demo
        const sampleCodes = {
            python: {
                factorial: `def factorial(n):
    """
    Calcula o fatorial de um número usando recursão.
    
    Args:
        n (int): Número para calcular o fatorial
        
    Returns:
        int: Fatorial do número
    """
    if n < 0:
        raise ValueError("Fatorial não definido para números negativos")
    elif n == 0 or n == 1:
        return 1
    else:
        return n * factorial(n - 1)

# Exemplo de uso
if __name__ == "__main__":
    numero = 5
    resultado = factorial(numero)
    print(f"O fatorial de {numero} é {resultado}")`,
                api: `from flask import Flask, request, jsonify
from flask_jwt_extended import JWTManager, create_access_token, jwt_required, get_jwt_identity
import bcrypt

app = Flask(__name__)
app.config['JWT_SECRET_KEY'] = 'sua-chave-secreta-aqui'
jwt = JWTManager(app)

# Simulando um banco de dados
users = []

@app.route('/register', methods=['POST'])
def register():
    data = request.get_json()
    
    # Validação básica
    if not data.get('email') or not data.get('password'):
        return jsonify({'error': 'Email e senha são obrigatórios'}), 400
    
    # Verificar se usuário já existe
    if any(user['email'] == data['email'] for user in users):
        return jsonify({'error': 'Usuário já existe'}), 409
    
    # Hash da senha
    hashed_password = bcrypt.hashpw(data['password'].encode('utf-8'), bcrypt.gensalt())
    
    # Criar usuário
    user = {
        'id': len(users) + 1,
        'email': data['email'],
        'password': hashed_password,
        'name': data.get('name', '')
    }
    users.append(user)
    
    return jsonify({'message': 'Usuário criado com sucesso', 'user_id': user['id']}), 201

@app.route('/login', methods=['POST'])
def login():
    data = request.get_json()
    
    # Encontrar usuário
    user = next((u for u in users if u['email'] == data.get('email')), None)
    
    if user and bcrypt.checkpw(data.get('password', '').encode('utf-8'), user['password']):
        access_token = create_access_token(identity=user['id'])
        return jsonify({'access_token': access_token}), 200
    
    return jsonify({'error': 'Credenciais inválidas'}), 401

@app.route('/users', methods=['GET'])
@jwt_required()
def get_users():
    current_user_id = get_jwt_identity()
    # Remover senhas da resposta
    safe_users = [{'id': u['id'], 'email': u['email'], 'name': u['name']} for u in users]
    return jsonify(safe_users), 200

if __name__ == '__main__':
    app.run(debug=True)`
            },
            javascript: {
                factorial: `/**
 * Calcula o fatorial de um número
 * @param {number} n - O número para calcular o fatorial
 * @returns {number} O fatorial do número
 */
function factorial(n) {
    // Validação de entrada
    if (typeof n !== 'number' || n < 0 || !Number.isInteger(n)) {
        throw new Error('O input deve ser um número inteiro não-negativo');
    }
    
    // Casos base
    if (n === 0 || n === 1) {
        return 1;
    }
    
    // Recursão
    return n * factorial(n - 1);
}

// Versão iterativa (mais eficiente para números grandes)
function factorialIterative(n) {
    if (typeof n !== 'number' || n < 0 || !Number.isInteger(n)) {
        throw new Error('O input deve ser um número inteiro não-negativo');
    }
    
    let result = 1;
    for (let i = 2; i <= n; i++) {
        result *= i;
    }
    return result;
}

// Exemplo de uso
console.log(factorial(5)); // 120
console.log(factorialIterative(5)); // 120`,
                api: `const express = require('express');
const jwt = require('jsonwebtoken');
const bcrypt = require('bcrypt');
const cors = require('cors');

const app = express();
const PORT = process.env.PORT || 3000;
const JWT_SECRET = process.env.JWT_SECRET || 'sua-chave-secreta';

// Middleware
app.use(express.json());
app.use(cors());

// Simulando banco de dados
let users = [];
let nextId = 1;

// Middleware de autenticação
const authenticateToken = (req, res, next) => {
    const authHeader = req.headers['authorization'];
    const token = authHeader && authHeader.split(' ')[1];

    if (!token) {
        return res.status(401).json({ error: 'Token de acesso requerido' });
    }

    jwt.verify(token, JWT_SECRET, (err, user) => {
        if (err) {
            return res.status(403).json({ error: 'Token inválido' });
        }
        req.user = user;
        next();
    });
};

// Rotas de autenticação
app.post('/api/register', async (req, res) => {
    try {
        const { email, password, name } = req.body;

        // Validação
        if (!email || !password) {
            return res.status(400).json({ error: 'Email e senha são obrigatórios' });
        }

        // Verificar se usuário já existe
        if (users.find(user => user.email === email)) {
            return res.status(409).json({ error: 'Usuário já existe' });
        }

        // Hash da senha
        const saltRounds = 10;
        const hashedPassword = await bcrypt.hash(password, saltRounds);

        // Criar usuário
        const user = {
            id: nextId++,
            email,
            password: hashedPassword,
            name: name || '',
            createdAt: new Date().toISOString()
        };

        users.push(user);

        // Remover senha da resposta
        const { password: _, ...userResponse } = user;
        res.status(201).json({ 
            message: 'Usuário criado com sucesso', 
            user: userResponse 
        });
    } catch (error) {
        res.status(500).json({ error: 'Erro interno do servidor' });
    }
});

app.post('/api/login', async (req, res) => {
    try {
        const { email, password } = req.body;

        // Encontrar usuário
        const user = users.find(u => u.email === email);
        if (!user) {
            return res.status(401).json({ error: 'Credenciais inválidas' });
        }

        // Verificar senha
        const validPassword = await bcrypt.compare(password, user.password);
        if (!validPassword) {
            return res.status(401).json({ error: 'Credenciais inválidas' });
        }

        // Gerar token
        const token = jwt.sign(
            { id: user.id, email: user.email },
            JWT_SECRET,
            { expiresIn: '24h' }
        );

        res.json({ 
            message: 'Login realizado com sucesso',
            token,
            user: { id: user.id, email: user.email, name: user.name }
        });
    } catch (error) {
        res.status(500).json({ error: 'Erro interno do servidor' });
    }
});

// Rotas protegidas
app.get('/api/users', authenticateToken, (req, res) => {
    const safeUsers = users.map(({ password, ...user }) => user);
    res.json(safeUsers);
});

app.get('/api/users/:id', authenticateToken, (req, res) => {
    const user = users.find(u => u.id === parseInt(req.params.id));
    if (!user) {
        return res.status(404).json({ error: 'Usuário não encontrado' });
    }
    
    const { password, ...safeUser } = user;
    res.json(safeUser);
});

app.listen(PORT, () => {
    console.log(\`Servidor rodando na porta \${PORT}\`);
});`
            }
        };

        let currentCode = '';
        let currentPrompt = '';

        generateBtn.addEventListener('click', async () => {
            const prompt = promptInput.value.trim();
            const language = languageSelect.value;
            
            if (!prompt) {
                alert('Por favor, descreva o código que você precisa.');
                return;
            }

            // Show loading state
            welcomeState.classList.add('hidden');
            outputSection.classList.add('hidden');
            loadingState.classList.remove('hidden');

            // Simulate API call delay
            await new Promise(resolve => setTimeout(resolve, 2000));

            // Generate sample code based on prompt and language
            let code = '';
            const languageNames = {
                python: 'Python',
                javascript: 'JavaScript',
                html: 'HTML',
                css: 'CSS',
                java: 'Java',
                cpp: 'C++',
                php: 'PHP',
                sql: 'SQL'
            };

            // Simple keyword matching for demo
            if (prompt.toLowerCase().includes('fatorial') || prompt.toLowerCase().includes('factorial')) {
                code = sampleCodes[language]?.factorial || `// Código para ${prompt}\n// Linguagem: ${languageNames[language]}\n\nconsole.log("Código gerado com sucesso!");`;
            } else if (prompt.toLowerCase().includes('api') || prompt.toLowerCase().includes('rest')) {
                code = sampleCodes[language]?.api || `// API REST em ${languageNames[language]}\n// ${prompt}\n\nconsole.log("API criada com sucesso!");`;
            } else {
                code = `// Código gerado para: ${prompt}
// Linguagem: ${languageNames[language]}

${language === 'python' ? 'def main():' : 'function main() {'}
${language === 'python' ? '    print("Código gerado com IA!")' : '    console.log("Código gerado com IA!");'}
${language === 'python' ? '' : '}'}

${language === 'python' ? 'if __name__ == "__main__":' : ''}
${language === 'python' ? '    main()' : 'main();'}`;
            }

            currentCode = code;
            currentPrompt = prompt;

            // Update UI
            generatedCode.textContent = code;
            generatedCode.className = `language-${language}`;
            codeLanguage.textContent = languageNames[language];

            // Hide loading and show output
            loadingState.classList.add('hidden');
            outputSection.classList.remove('hidden');

            // Enable action buttons
            optimizeBtn.disabled = false;
            explainBtn.disabled = false;

            // Add to history
            addToHistory(prompt, language);

            // Highlight syntax
            Prism.highlightElement(generatedCode);
        });

        // Optimize button
        optimizeBtn.addEventListener('click', async () => {
            if (!currentCode) return;

            loadingState.classList.remove('hidden');
            outputSection.classList.add('hidden');

            await new Promise(resolve => setTimeout(resolve, 1500));

            // Add optimization comments
            const optimizedCode = `${currentCode}

# Otimizações aplicadas:
# - Adicionada validação de entrada
# - Melhorada eficiência do algoritmo
# - Adicionados comentários explicativos
# - Tratamento de erros implementado`;

            currentCode = optimizedCode;
            generatedCode.textContent = optimizedCode;

            loadingState.classList.add('hidden');
            outputSection.classList.remove('hidden');

            Prism.highlightElement(generatedCode);
        });

        // Explain button
        explainBtn.addEventListener('click', async () => {
            if (!currentCode) return;

            const explanations = {
                'fatorial': 'Este código implementa uma função para calcular o fatorial de um número. O fatorial de n (n!) é o produto de todos os números inteiros positivos menores ou iguais a n. A função inclui validação de entrada para garantir que apenas números não-negativos sejam aceitos.',
                'api': 'Este código cria uma API REST completa com autenticação JWT. Inclui endpoints para registro e login de usuários, com hash seguro de senhas usando bcrypt. O middleware de autenticação protege rotas sensíveis e valida tokens JWT.',
                'default': 'Este código foi gerado com base na sua descrição. Ele segue as melhores práticas da linguagem escolhida e inclui comentários explicativos para facilitar o entendimento e manutenção.'
            };

            let explanation = explanations.default;
            if (currentPrompt.toLowerCase().includes('fatorial')) {
                explanation = explanations.fatorial;
            } else if (currentPrompt.toLowerCase().includes('api')) {
                explanation = explanations.api;
            }

            codeExplanation.textContent = explanation;
            explanationSection.classList.remove('hidden');
        });

        // Copy button
        const copyBtn = document.getElementById('copyBtn');
        copyBtn.addEventListener('click', async () => {
            try {
                await navigator.clipboard.writeText(currentCode);
                
                // Visual feedback
                const originalText = copyBtn.innerHTML;
                copyBtn.innerHTML = '<i class="fas fa-check"></i><span>Copiado!</span>';
                copyBtn.classList.add('bg-green-600');
                
                setTimeout(() => {
                    copyBtn.innerHTML = originalText;
                    copyBtn.classList.remove('bg-green-600');
                }, 2000);
            } catch (err) {
                console.error('Erro ao copiar:', err);
            }
        });

        // Download button
        const downloadBtn = document.getElementById('downloadBtn');
        downloadBtn.addEventListener('click', () => {
            const language = languageSelect.value;
            const extensions = {
                python: 'py',
                javascript: 'js',
                html: 'html',
                css: 'css',
                java: 'java',
                cpp: 'cpp',
                php: 'php',
                sql: 'sql'
            };

            const filename = `codigo_gerado.${extensions[language]}`;
            const blob = new Blob([currentCode], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        });

        // Save button (demo)
        const saveBtn = document.getElementById('saveBtn');
        saveBtn.addEventListener('click', () => {
            // In a real app, this would save to user's account
            alert('Código salvo na sua conta! (Demo)');
        });

        // Feedback buttons
        const feedbackBtns = document.querySelectorAll('.feedback-btn');
        feedbackBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const rating = btn.dataset.rating;
                
                // Visual feedback
                feedbackBtns.forEach(b => b.classList.remove('opacity-50'));
                btn.classList.add('opacity-50');
                
                // In a real app, this would send feedback to the server
                console.log(`Feedback: ${rating}`);
            });
        });

        // History functionality
        function addToHistory(prompt, language) {
            const historyList = document.getElementById('historyList');
            const historyItem = document.createElement('button');
            historyItem.className = 'w-full text-left px-3 py-2 rounded-lg text-sm text-gray-400 hover:bg-cyan-500/20 hover:text-cyan-300 border border-transparent hover:border-cyan-500/30 truncate';
            historyItem.textContent = prompt.substring(0, 30) + (prompt.length > 30 ? '...' : '');
            historyItem.title = prompt;
            
            historyItem.addEventListener('click', () => {
                promptInput.value = prompt;
                languageSelect.value = language;
            });
            
            historyList.insertBefore(historyItem, historyList.firstChild);
            
            // Keep only last 5 items
            while (historyList.children.length > 5) {
                historyList.removeChild(historyList.lastChild);
            }
        }

        // Auto-resize textarea
        promptInput.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = this.scrollHeight + 'px';
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey || e.metaKey) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    generateBtn.click();
                } else if (e.key === 'k') {
                    e.preventDefault();
                    promptInput.focus();
                }
            }
        });

        // Initialize default language selection
        languageBtns[0].classList.add('bg-cyan-500/30', 'text-cyan-300', 'border-cyan-400');
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'972dd50684394360',t:'MTc1NTgxODEyMy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
